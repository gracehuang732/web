<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="content-type" content="text/html"/>
    <title>WOW A MAP</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBNEiNahO7DRkCF9DyLErWsiCZreuFVoEI"
            type="text/javascript"></script>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <script src="googleMapAPI.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="layout.css">
    <script>
      var categories = "";


      $( document ).ready(function(){
        toggleOnOff();
      })

      function loadMap(){
        var $elements = document.getElementsByClassName("on");
        $.each($elements,function(){
          if (categories == "") {
            categories = $(this).attr('id');
          }
          else {
            if (!categories.includes($(this).attr('id'))) {
              categories = categories + "+" + $(this).attr('id');
            }
          }
        });
        console.log("categories: " +categories);
        var keywords = categories;
        var location = document.getElementById("location").value;
        load(keywords,location);
        categories = "";
      }

      function toggleOnOff(){
        $('.cat').click(function() {
          if ($(this).hasClass("off")) {
            // alert("turnON");
            $(this).removeClass("off");
            $(this).addClass("on");
          }
          else {
            //  alert("turnOFF");
            $(this).removeClass("on");
            $(this).addClass("off");
          }

        });
      }

    </script>

  </head>

  <body onload = loadMap()>
    <div class = container-fluid>
      <div class = "titles">
        <h1>TravelBuddy</h1>
        <h3><small>To satisfy your wanderlust</small></h3>
      </div>
      <div id="map" style="width: 1200px; height: 500px"></div>
      <div id = "search">
        <div id="categories" class = "row">
          <div class = "cat-elem cat off col-md-3" id = "active"><p>Active</p></div>
          <div class = "cat-elem cat off col-md-3" id = "arts"><p>Arts</p></div>
          <div class = "cat-elem cat off col-md-3" id = "restaurants"><p>Restaurants</p></div>
          <div class = "cat-elem off col-md-3" id = "other"><input type="text" name="keywords" value="Other" id = "keywords"></div>
        </div>


        <form class="form-horizontal" role="form">
          <div class="form-group">
            <label class="control-label col-sm-2" for="location">Location:</label>
            <div class="col-sm-6">
              <input type="text" class="form-control" id="location" name = "location" placeholder="Enter location">
            </div>
            <div class="col-sm-4">
              <input class = "btn btn-default" id = "mapsubmit" type="button" value="submit" onclick="loadMap()">
            </div>
          </div>

        </form>
      </div>
    </div>
  </body>


</html>
